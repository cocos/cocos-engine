in highp vec2 v_clip_depth;

layout(location = 0) out vec4 fragColorX;

void main () {
  // for alpha clip
  SurfacesFragmentModifyBaseColorAndTransparency();

  highp float clipDepth = v_clip_depth.x / v_clip_depth.y * 0.5 + 0.5;
  // spot use linear
  if(cc_shadowLPNNInfo.x > EPSILON && cc_shadowLPNNInfo.x < 1.999999) {
    // enabled linear depth
    if (cc_shadowNFLSInfo.z > EPSILON) {
      clipDepth = CCGetLinearDepth(FSInput_worldPos.xyz);
    }
  }

  #if CC_SHADOWMAP_FORMAT == SHADOWMAP_FORMAT_RGBA8
    fragColorX = packDepthToRGBA(clipDepth);
  #else
    fragColorX = vec4(clipDepth, 1.0, 1.0, 1.0);
  #endif
}
