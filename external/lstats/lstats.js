module.exports=function(){"use strict";function t(){if(typeof window.performance==="undefined"){window.performance={}}if(!window.performance.now){let t=Date.now();if(performance.timing&&performance.timing.navigationStart){t=performance.timing.navigationStart}window.performance.now=function i(){return Date.now()-t}}if(!window.performance.mark){window.performance.mark=function(){}}if(!window.performance.measure){window.performance.measure=function(){}}if(!window.performance.memory){window.performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}}}t();const i=80;const e=38;const s=Math.round(window.devicePixelRatio||1);const h=i*s;const a=e*s;const l=3*s;const n=2*s;const c=3*s;const _=15*s;const o=74*s;const f=(e-18)*s;class r{constructor(t,r,d,m){this._name=r;this._fg=d;this._bg=m;this._canvas=document.createElement("canvas");this._canvas.width=h;this._canvas.height=a;this._canvas.style.cssText=`width:${i}px;height:${e}px`;this._ctx=this._canvas.getContext("2d");this._ctx.font=`bold ${9*s}px Helvetica,Arial,sans-serif`;this._ctx.textBaseline="top";this._ctx.fillStyle=m;this._ctx.fillRect(0,0,h,a);this._ctx.fillStyle=d;this._ctx.fillText(r,l,n);this._ctx.fillRect(c,_,o,f);this._ctx.fillStyle=m;this._ctx.globalAlpha=.9;this._ctx.fillRect(c,_,o,f);t.appendChild(this._canvas)}draw(t,i){let e=Math.round(t*100)/100;this._ctx.fillStyle=this._bg;this._ctx.globalAlpha=1;this._ctx.fillRect(0,0,h,_);this._ctx.fillStyle=this._fg;this._ctx.fillText(`${e} ${this._name}`,l,n);this._ctx.drawImage(this._canvas,c+s,_,o-s,f,c,_,o-s,f);this._ctx.fillRect(c+o-s,_,s,f);let a=Math.round((1-t/i)*f);this._ctx.fillStyle=this._bg;this._ctx.globalAlpha=.9;this._ctx.fillRect(c+o-s,_,s,a)}}class d extends r{constructor(t,i,e,h){super(t,i,e,h);this._threshold=0;this._canvas2=document.createElement("canvas");this._canvas2.width=o;this._canvas2.height=f;this._canvas2.style.cssText=`width:${o/s}px;height:${f/s}px`;this._ctx2=this._canvas2.getContext("2d");this._ctx2.fillStyle=h;this._ctx.globalAlpha=.9;this._ctx2.fillRect(0,0,o,f)}draw(t,i){let e=Math.round(t*100)/100;this._ctx.fillStyle=this._bg;this._ctx.globalAlpha=1;this._ctx.fillRect(0,0,h,_);this._ctx.fillStyle=this._fg;this._ctx.fillText(`${e} ${this._name}`,l,n);if(t>this._threshold){let i=(t-t%f)/f;let e=f*(i+1);let h=this._threshold;this._threshold=e;let a=h/e;this._ctx2.drawImage(this._canvas,c,_,o,f,0,0,o,f);this._ctx.fillStyle=this._fg;this._ctx.globalAlpha=1;this._ctx.fillRect(c,_,o,f);this._ctx.fillStyle=this._bg;this._ctx.globalAlpha=.9;this._ctx.fillRect(c,_,o,f);this._ctx.fillStyle=this._fg;this._ctx.globalAlpha=1;this._ctx.drawImage(this._canvas2,s,0,o-s,f,c,_+(1-a)*f,o-s,a*f)}else{this._ctx.drawImage(this._canvas,c+s,_,o-s,f,c,_,o-s,f)}let a=Math.round((1-t/this._threshold)*f);this._ctx.fillRect(c+o-s,_,s,f);if(i){this._ctx.fillStyle="#e00";this._ctx.globalAlpha=1;this._ctx.fillRect(c+o-s,_,s,a)}else{this._ctx.fillStyle=this._bg;this._ctx.globalAlpha=.9;this._ctx.fillRect(c+o-s,_,s,a)}}}class m{constructor(t,i=["fps","ms","mb"]){this._mode=0;this._enableFPS=i.indexOf("fps")!==-1;this._enableMS=i.indexOf("ms")!==-1;if(window.performance.memory&&window.performance.memory.totalJSHeapSize){this._enableMB=i.indexOf("mb")!==-1}this._framesMS=0;this._lastTimeMS=0;this._frames=0;this._lastTimeFPS=0;this._used=0;this._lastUsed=0;this._lastTimeMB=0;let e=document.createElement("div");e.style.cssText="position:fixed;top:5px;right:5px;cursor:pointer;opacity:0.9;z-index:9999";e.addEventListener("mousedown",t=>{t.preventDefault();t.stopPropagation();this._mode=++this._mode%e.children.length;for(let t=0;t<e.children.length;++t){e.children[t].style.display=t===this._mode?"block":"none"}});if(this._enableFPS){this._graphFPS=new r(e,"FPS","#0ff","#002")}if(this._enableMS){this._graphMS=new r(e,"MS","#f08","#201")}if(this._enableMB){this._graphMB=new d(e,"MB","#0f0","#020")}for(let t=0;t<e.children.length;++t){e.children[t].style.display=t===0?"block":"none"}t.appendChild(e)}tick(){let t=window.performance.now();if(this._enableMS){++this._framesMS;let i=t-this._lastTimeMS;if(i>100){this._graphMS.draw(i/this._framesMS,50);this._framesMS=0;this._lastTimeMS=t}}if(this._enableFPS){++this._frames;let i=t-this._lastTimeFPS;if(i>1e3){this._graphFPS.draw(this._frames*1e3/i,100);this._frames=0;this._lastTimeFPS=t}}if(this._enableMB){let i=t-this._lastTimeMB;if(i>200){this._lastUsed=this._used;this._used=window.performance.memory.usedJSHeapSize;this._lastTimeMB=t;let i=this._used-this._lastUsed;this._graphMB.draw(this._used/1048576,i<0)}}}}return m}();
