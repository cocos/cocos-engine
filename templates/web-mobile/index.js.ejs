import { Application } from '<%= applicationJS %>';

const canvas = document.getElementById('GameCanvas');
const $p = canvas.parentElement;
const bcr = $p.getBoundingClientRect();
canvas.width = bcr.width;
canvas.height = bcr.height;

function topLevelImport (url) {
    return System.import(url);
}

const application = new Application();
console.time('import cc');
topLevelImport('cc')
.then((engine) => {
    console.timeEnd('import cc');
    console.time('index:application init');
    return application.init(engine);
}).then(() => {
    console.timeEnd('index:application init');
    console.time('application start:game init');
    return application.start();
}).then(() => {
    console.timeEnd('application start:game init');
}).catch((err) => {
    console.error(err);
});
